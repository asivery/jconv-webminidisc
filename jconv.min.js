var unknown=63,unknown2=12539,tables={SJIS:require("./tables/SJIS"),JIS:require("./tables/JIS"),JISEXT:require("./tables/JISEXT"),SJISInverted:require("./tables/SJISInverted"),JISInverted:require("./tables/JISInverted"),JISEXTInverted:require("./tables/JISEXTInverted")},encodings={},Encoding=function(d){this.name=d.name;this.convert=d.convert},jconv=module.exports=function(d,l,g){return jconv.convert(d,l,g)};jconv.defineEncoding=function(d){encodings[d.name]=new Encoding(d)};
jconv.convert=function(d,l,g){if(!g)throw Error("Encoding not recognized.");l=getName(l);g=getName(g);if(l===g)return d;d=ensureBuffer(d);var k=l+"to"+g;if(encodings[k])return encodings[k].convert(d);d=encodings[l+"toUTF8"].convert(d);return encodings["UTF8to"+g].convert(d)};jconv.decode=function(d,l){return jconv.convert(d,l,"UTF8").toString()};jconv.encode=function(d,l){return jconv.convert(d,"UTF8",l)};
function getName(d){if(!d)return"UTF8";switch(d.toUpperCase()){case "WINDOWS-31J":case "CP932":case "SJIS":case "SHIFTJIS":case "SHIFT_JIS":return"SJIS";case "EUCJP":case "EUC-JP":return"EUCJP";case "JIS":case "ISO2022JP":case "ISO-2022-JP":case "ISO-2022-JP-1":return"JIS";case "UTF8":case "UTF-8":return"UTF8";case "UNICODE":case "UCS2":case "UCS-2":case "UTF16LE":case "UTF-16LE":return"UNICODE";default:throw Error("Encoding not recognized.");}}
function ensureBuffer(d){d=d||new Buffer(0);return d instanceof Buffer?d:new Buffer(d.toString(),"UTF8")}function setUtf8Buffer(d,l,g){128>d?l[g++]=d:(2048>d?l[g++]=192|d>>>6:(65536>d?l[g++]=224|d>>>12:(2097152>d?l[g++]=240|d>>>18:(67108864>d?l[g++]=248|d>>>24:(l[g++]=252|d/1073741824,l[g++]=128|d>>>24&63),l[g++]=128|d>>>18&63),l[g++]=128|d>>>12&63),l[g++]=128|d>>>6&63),l[g++]=128|d&63);return g}function setUnicodeBuffer(d,l,g){l[g++]=d&255;l[g++]=d>>8;return g}
jconv.defineEncoding({name:"UNICODEtoUTF8",convert:function(d){for(var l=setUtf8Buffer,g=d.length,k=new Buffer(3*g),f=0,c,a=0;a<g;)c=d[a++],c=((d[a++]&255)<<8)+c,f=l(c,k,f);return k.slice(0,f)}});jconv.defineEncoding({name:"UNICODEtoSJIS",convert:function(d){for(var l=tables.SJISInverted,g=l[unknown2],k=d.length,f=new Buffer(k),c=0,a,b=0;b<k;)a=d[b++],a=((d[b++]&255)<<8)+a,128>a?f[c++]=a:65377<=a&&65439>=a?f[c++]=a-65216:(a=l[a]||g,f[c++]=a>>8,f[c++]=a&255);return f.slice(0,c)}});
jconv.defineEncoding({name:"UNICODEtoJIS",convert:function(d){for(var l=tables.JISInverted,g=tables.JISEXTInverted,k=l[unknown2],f=d.length,c=new Buffer(3*f+4),a=0,b,e=0,h=0;h<f;)if(b=d[h++],b=((d[h++]&255)<<8)+b,128>b)0!==e&&(e=0,c[a++]=27,c[a++]=40,c[a++]=66),c[a++]=b;else if(65377<=b&&65439>=b)1!==e&&(e=1,c[a++]=27,c[a++]=40,c[a++]=73),c[a++]=b-65344;else{var m=l[b];m?(2!==e&&(e=2,c[a++]=27,c[a++]=36,c[a++]=66),c[a++]=m>>8,c[a++]=m&255):(b=g[b])?(3!==e&&(e=3,c[a++]=27,c[a++]=36,c[a++]=40,c[a++]=
68),c[a++]=b>>8,c[a++]=b&255):(2!==e&&(e=2,c[a++]=27,c[a++]=36,c[a++]=66),c[a++]=k>>8,c[a++]=k&255)}0!==e&&(c[a++]=27,c[a++]=40,c[a++]=66);return c.slice(0,a)}});
jconv.defineEncoding({name:"UNICODEtoEUCJP",convert:function(d){for(var l=tables.JISInverted,g=tables.JISEXTInverted,k=l[unknown2],f=d.length,c=new Buffer(2*f),a=0,b,e=0;e<f;)if(b=d[e++],b=((d[e++]&255)<<8)+b,128>b)c[a++]=b;else if(65377<=b&&65439>=b)c[a++]=142,c[a++]=b-65472;else{var h=l[b];h?(c[a++]=(h>>8)-128,c[a++]=(h&255)-128):(b=g[b])?(c[a++]=143,c[a++]=(b>>8)-128,c[a++]=(b&255)-128):(c[a++]=(k>>8)-128,c[a++]=(k&255)-128)}return c.slice(0,a)}});
jconv.defineEncoding({name:"UTF8toUNICODE",convert:function(d){for(var l=setUnicodeBuffer,g=d.length,k=new Buffer(2*g),f=0,c,a=0;a<g;){c=d[a++];switch(c>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:break;case 12:case 13:c=(c&31)<<6|d[a++]&63;break;case 14:c=(c&15)<<12|(d[a++]&63)<<6|d[a++]&63;break;default:c=(c&7)<<18|(d[a++]&63)<<12|(d[a++]&63)<<6|d[a++]&63}f=l(c,k,f)}return k.slice(0,f)}});
jconv.defineEncoding({name:"UTF8toSJIS",convert:function(d){for(var l=tables.SJISInverted,g=l[unknown2],k=d.length,f=new Buffer(2*k),c=0,a,b=0;b<k;){a=d[b++];switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:break;case 12:case 13:a=(a&31)<<6|d[b++]&63;break;case 14:a=(a&15)<<12|(d[b++]&63)<<6|d[b++]&63;break;default:a=(a&7)<<18|(d[b++]&63)<<12|(d[b++]&63)<<6|d[b++]&63}128>a?f[c++]=a:65377<=a&&65439>=a?f[c++]=a-65216:(a=l[a]||g,f[c++]=a>>8,f[c++]=a&255)}return f.slice(0,c)}});
jconv.defineEncoding({name:"UTF8toJIS",convert:function(d){for(var l=tables.JISInverted,g=tables.JISEXTInverted,k=l[unknown2],f=d.length,c=new Buffer(3*f+4),a=0,b,e=0,h=0;h<f;){b=d[h++];switch(b>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:break;case 12:case 13:b=(b&31)<<6|d[h++]&63;break;case 14:b=(b&15)<<12|(d[h++]&63)<<6|d[h++]&63;break;default:b=(b&7)<<18|(d[h++]&63)<<12|(d[h++]&63)<<6|d[h++]&63}if(128>b)0!==e&&(e=0,c[a++]=27,c[a++]=40,c[a++]=66),c[a++]=b;else if(65377<=b&&65439>=
b)1!==e&&(e=1,c[a++]=27,c[a++]=40,c[a++]=73),c[a++]=b-65344;else{var m=l[b];m?(2!==e&&(e=2,c[a++]=27,c[a++]=36,c[a++]=66),c[a++]=m>>8,c[a++]=m&255):(b=g[b])?(3!==e&&(e=3,c[a++]=27,c[a++]=36,c[a++]=40,c[a++]=68),c[a++]=b>>8,c[a++]=b&255):(2!==e&&(e=2,c[a++]=27,c[a++]=36,c[a++]=66),c[a++]=k>>8,c[a++]=k&255)}}0!==e&&(c[a++]=27,c[a++]=40,c[a++]=66);return c.slice(0,a)}});
jconv.defineEncoding({name:"UTF8toEUCJP",convert:function(d){for(var l=tables.JISInverted,g=tables.JISEXTInverted,k=l[unknown2],f=d.length,c=new Buffer(2*f),a=0,b,e=0;e<f;){b=d[e++];switch(b>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:break;case 12:case 13:b=(b&31)<<6|d[e++]&63;break;case 14:b=(b&15)<<12|(d[e++]&63)<<6|d[e++]&63;break;default:b=(b&7)<<18|(d[e++]&63)<<12|(d[e++]&63)<<6|d[e++]&63}if(128>b)c[a++]=b;else if(65377<=b&&65439>=b)c[a++]=142,c[a++]=b-65472;else{var h=l[b];
h?(c[a++]=(h>>8)-128,c[a++]=(h&255)-128):(b=g[b])?(c[a++]=143,c[a++]=(b>>8)-128,c[a++]=(b&255)-128):(c[a++]=(k>>8)-128,c[a++]=(k&255)-128)}}return c.slice(0,a)}});jconv.defineEncoding({name:"SJIStoUNICODE",convert:function(d){for(var l=tables.SJIS,g=setUnicodeBuffer,k=d.length,f=new Buffer(3*k),c=0,a,b=0;b<k;)a=d[b++],128>a||(160<=a&&223>=a?a+=65216:(a=(a<<8)+d[b++],a=l[a]||unknown2)),c=g(a,f,c);return f.slice(0,c)}});
jconv.defineEncoding({name:"SJIStoUTF8",convert:function(d){for(var l=tables.SJIS,g=setUtf8Buffer,k=d.length,f=new Buffer(3*k),c=0,a,b=0;b<k;)a=d[b++],128>a||(160<=a&&223>=a?a+=65216:(a=(a<<8)+d[b++],a=l[a]||unknown2)),c=g(a,f,c);return f.slice(0,c)}});
jconv.defineEncoding({name:"SJIStoJIS",convert:function(d){for(var l=tables.SJIS,g=tables.JISInverted,k=d.length,f=new Buffer(3*k+4),c=0,a=0,b=0;b<k;){var e=d[b++];if(128>e)0!==a&&(a=0,f[c++]=27,f[c++]=40,f[c++]=66),f[c++]=e;else if(161<=e&&223>=e)1!==a&&(a=1,f[c++]=27,f[c++]=40,f[c++]=73),f[c++]=e-128;else if(238>=e){2!==a&&(a=2,f[c++]=27,f[c++]=36,f[c++]=66);var h=d[b++],e=e<<1;159>h?(e=319>e?e-225:e-97,h=126<h?h-32:h-31):(e=319>e?e-224:e-96,h-=126);f[c++]=e;f[c++]=h}else 250<=e&&(2!==a&&(a=2,f[c++]=
27,f[c++]=36,f[c++]=66),e=(e<<8)+d[b++],e=g[l[e]||unknown2],f[c++]=e>>8,f[c++]=e&255)}0!==a&&(f[c++]=27,f[c++]=40,f[c++]=66);return f.slice(0,c)}});
jconv.defineEncoding({name:"SJIStoEUCJP",convert:function(d){for(var l=tables.SJIS,g=tables.JISInverted,k=d.length,f=new Buffer(2*k),c=0,a=0;a<k;){var b=d[a++];if(128>b)f[c++]=b;else if(161<=b&&223>=b)f[c++]=142,f[c++]=b;else if(238>=b){var e=d[a++],b=b<<1;159>e?(b=319>b?b-97:b-225,e=126<e?e+96:e+97):(b=319>b?b-96:b-224,e+=2);f[c++]=b;f[c++]=e}else 250<=b&&(b=(b<<8)+d[a++],b=g[l[b]||unknown2],f[c++]=(b>>8)-128,f[c++]=(b&255)-128)}return f.slice(0,c)}});
jconv.defineEncoding({name:"JIStoUNICODE",convert:function(d){for(var l=tables.JIS,g=tables.JISEXT,k=setUnicodeBuffer,f=d.length,c=new Buffer(2*f),a=0,b,e=0,h=0;h<f;){var m=d[h++];if(27===m){var m=d[h++],n=d[h++];switch(m){case 40:66===n||161===d?e=0:73===n&&(e=1);break;case 38:e=2;h+=3;break;case 36:64===n||66===n?e=2:40===n&&(e=3,h++)}}else{switch(e){case 0:b=m;break;case 1:b=m+65344;break;case 2:b=(m<<8)+d[h++];b=l[b]||unknown2;break;case 3:b=(m<<8)+d[h++],b=g[b]||unknown2}a=k(b,c,a)}}return c.slice(0,
a)}});
jconv.defineEncoding({name:"JIStoUTF8",convert:function(d){for(var l=tables.JIS,g=tables.JISEXT,k=setUtf8Buffer,f=d.length,c=new Buffer(2*f),a=0,b,e=0,h=0;h<f;){var m=d[h++];if(27===m){var m=d[h++],n=d[h++];switch(m){case 40:66===n||161===d?e=0:73===n&&(e=1);break;case 38:e=2;h+=3;break;case 36:64===n||66===n?e=2:40===n&&(e=3,h++)}}else{switch(e){case 0:b=m;break;case 1:b=m+65344;break;case 2:b=(m<<8)+d[h++];b=l[b]||unknown2;break;case 3:b=(m<<8)+d[h++],b=g[b]||unknown2}a=k(b,c,a)}}return c.slice(0,a)}});
jconv.defineEncoding({name:"JIStoSJIS",convert:function(d){for(var l=tables.SJIS,g=tables.SJISInverted,k=g[unknown2],f=d.length,c=new Buffer(2*f),a=0,b=0,e=0;e<f;){var h=d[e++];if(27===h){var m=d[e++],h=d[e++];switch(m){case 40:66===h||161===d?b=0:73===h&&(b=1);break;case 38:b=2;e+=3;break;case 36:64===h||66===h?b=2:40===h&&(b=3,e++)}}else switch(b){case 0:c[a++]=h;break;case 1:c[a++]=h+128;break;case 2:m=d[e++];h&1?(h>>=1,h=47>h?h+113:h-79,m=95<m?m+32:m+31):(h>>=1,h=47>=h?h+112:h-80,m+=126);var n=
((h&255)<<8)+m;60736<=n&&61180>=n&&(m=g[l[n]]||k,h=m>>8,m&=255);c[a++]=h;c[a++]=m;break;case 3:c[a++]=k>>8,c[a++]=k&255,e++}}return c.slice(0,a)}});
jconv.defineEncoding({name:"JIStoEUCJP",convert:function(d){for(var l=d.length,g=new Buffer(2*l),k=0,f=0,c=0;c<l;){var a=d[c++];if(27===a){var a=d[c++],b=d[c++];switch(a){case 40:66===b||161===d?f=0:73===b&&(f=1);break;case 38:f=2;c+=3;break;case 36:64===b||66===b?f=2:40===b&&(f=3,c++)}}else switch(f){case 0:g[k++]=a;break;case 1:g[k++]=142;g[k++]=a+128;break;case 2:g[k++]=a+128;g[k++]=d[c++]+128;break;case 3:g[k++]=143,g[k++]=a+128,g[k++]=d[c++]+128}}return g.slice(0,k)}});
jconv.defineEncoding({name:"EUCJPtoUNICODE",convert:function(d){for(var l=tables.JIS,g=tables.JISEXT,k=setUnicodeBuffer,f=d.length,c=new Buffer(2*f),a=0,b,e=0;e<f;){b=d[e++];if(!(128>b))if(142===b)b=d[e++]+65216;else if(143===b){b=d[e++]-128;var h=d[e++]-128;b=(b<<8)+h;b=g[b]||unknown2}else h=b-128,b=d[e++]-128,b=(h<<8)+b,b=l[b]||unknown2;a=k(b,c,a)}return c.slice(0,a)}});
jconv.defineEncoding({name:"EUCJPtoUTF8",convert:function(d){for(var l=tables.JIS,g=tables.JISEXT,k=setUtf8Buffer,f=d.length,c=new Buffer(2*f),a=0,b,e=0;e<f;){b=d[e++];if(!(128>b))if(142===b)b=d[e++]+65216;else if(143===b){b=d[e++]-128;var h=d[e++]-128;b=(b<<8)+h;b=g[b]||unknown2}else h=b-128,b=d[e++]-128,b=(h<<8)+b,b=l[b]||unknown2;a=k(b,c,a)}return c.slice(0,a)}});
jconv.defineEncoding({name:"EUCJPtoSJIS",unknown:tables.SJISInverted[unknown2],convert:function(d){for(var l=tables.SJIS,g=tables.SJISInverted,k=g[unknown2],f=d.length,c=new Buffer(2*f),a=0,b=0;b<f;){var e=d[b++];if(128>e)c[a++]=e;else if(142===e)c[a++]=d[b++];else if(143===e)c[a++]=k>>8,c[a++]=k&255,b+=2;else{var h=d[b++];e&1?(e>>=1,e=111>e?e+49:e+113,h=223<h?h-96:h-97):(e>>=1,e=111>=e?e+48:e+112,h-=2);var m=((e&255)<<8)+h;60736<=m&&61180>=m&&(h=g[l[m]]||k,e=h>>8,h&=255);c[a++]=e;c[a++]=h}}return c.slice(0,
a)}});jconv.defineEncoding({name:"EUCJPtoJIS",convert:function(d){for(var l=d.length,g=new Buffer(3*l+4),k=0,f=0,c=0;c<l;){var a=d[c++];128>a?(0!==f&&(f=0,g[k++]=27,g[k++]=40,g[k++]=66),g[k++]=a):(142===a?1!==f&&(f=1,g[k++]=27,g[k++]=40,g[k++]=73):143===a?(3!==f&&(f=3,g[k++]=27,g[k++]=36,g[k++]=40,g[k++]=68),g[k++]=d[c++]-128):(2!==f&&(f=2,g[k++]=27,g[k++]=36,g[k++]=66),g[k++]=a-128),g[k++]=d[c++]-128)}0!==f&&(g[k++]=27,g[k++]=40,g[k++]=66);return g.slice(0,k)}});
